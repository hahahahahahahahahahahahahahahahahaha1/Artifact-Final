<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Upload Artworks — ARTifacts</title>

  <link rel="stylesheet" href="style.css">

  <style>
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .upload-container label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }

    .upload-container input, 
    .upload-container textarea, 
    .upload-container button {
      display: block;
      width: 100%;
      margin-top: 5px;
      padding: 8px;
      box-sizing: border-box;
    }

    .upload-container button {
      margin-top: 15px;
      cursor: pointer;
    }
  </style>
</head>

<body>

<div class="top-bar">
  <a href="home.html" class="back-btn">← Back</a>
  <button onclick="logout()">Logout</button>
</div>

<h1>Manage Artworks</h1>

<div class="upload-container">

  <!-- Image Upload -->
  <label>Upload Artwork Image</label>
  <input type="file" id="artInput" accept="image/*">

  <label>Artwork Title</label>
  <input type="text" id="artTitle" placeholder="Enter artwork title">

  <label>Description</label>
  <textarea id="artDesc" rows="3" placeholder="Short description"></textarea>

  <button onclick="addArtwork()">Add Artwork</button>

  <hr style="margin:20px 0;">

  <!-- 3D Model Upload -->
  <label>Upload 3D Model (.gltf / .glb)</label>
  <input type="file" id="modelInput" accept=".gltf,.glb">

  <label>3D Model Title</label>
  <input type="text" id="modelTitle" placeholder="Enter model title">

  <label>3D Model Description</label>
  <textarea id="modelDesc" rows="2" placeholder="Short description"></textarea>

  <button onclick="uploadModel()">Upload 3D Model</button>

  <h2>Your Artworks & Models</h2>
  <div id="artList"></div>

</div>

<script src="script.js"></script>

<script>
  if (!localStorage.getItem("currentUser")) {
    window.location.href = "login.html";
  }

  displayArtworks();

  function logout() {
    localStorage.removeItem("currentUser");
    window.location.href = "login.html";
  }

  function uploadModel() {
    const file = document.getElementById("modelInput").files[0];
    const title = document.getElementById("modelTitle").value.trim();
    const desc = document.getElementById("modelDesc").value.trim();

    if (!file) return alert("Please select a GLTF/GLB file!");
    if (!title) return alert("Enter model title!");

    const reader = new FileReader();
    reader.onload = function(e) {
      updateArtistData(artist => {
        if (!artist.models) artist.models = [];
        artist.models.push({
          name: file.name,
          data: e.target.result,
          title: title,
          desc: desc
        });
      });

      alert("3D model uploaded successfully!");
      document.getElementById("modelInput").value = "";
      document.getElementById("modelTitle").value = "";
      document.getElementById("modelDesc").value = "";

      displayArtworks();
    };
    reader.readAsDataURL(file);
  }
</script>

</body>
</html>
